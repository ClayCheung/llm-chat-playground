# llm-chat-playground

`llm-chat-playground` æ˜¯ä¸€æ¬¾ä¸º`åŸºäº LLM ä»£ç†çš„èŠå¤©åº”ç”¨`æä¾›å‘å¸ƒå’Œä½¿ç”¨ä¾¿åˆ©çš„å¹³å°ã€‚ä»ç”¨æˆ·ä½“éªŒè§’åº¦æ¥çœ‹ï¼Œå…¶åŠŸèƒ½ç±»ä¼¼äº poe.com çš„èŠå¤©æœºå™¨äººå¹³å°ï¼Œ
ç”¨æˆ·å¯é€šè¿‡è¯¥å¹³å°åˆ›å»ºä¸ç‰¹å®šä»£ç†çš„ä¼šè¯å¹¶å®ç°å¯¹è¯äº¤æµã€‚ä»å¼€å‘äººå‘˜å‘å¸ƒè§’åº¦å‡ºå‘ï¼Œå¼€å‘äººå‘˜å¯å‘ä»“åº“è´¡çŒ®ä»–ä»¬çš„ [Chattableä»£ç†](#chattable)ï¼Œ
ä»è€Œä½¿ç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨ä¸è¿™äº›ä»£ç†åˆ›å»ºä¼šè¯ã€‚è€Œ`llm-chat-playground` åˆ™æ‰¿æ‹…äº†å¤šç”¨æˆ·ç®¡ç†ã€ä¼šè¯ç®¡ç†ã€token å®¡è®¡ã€ç¼“å­˜ç®¡ç†ä»¥åŠå¤šä»£ç†ä¼šè¯æ”¯æŒç­‰ç›¸å…³ä»»åŠ¡ï¼Œ
å¼€å‘äººå‘˜åªéœ€ä¸“æ³¨äºå®ç°ä»£ç†çš„å†…éƒ¨é€»è¾‘ï¼ˆå³æ€ç»´é“¾çš„æ„å»ºï¼‰ã€‚

å®ƒä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯æ„å»ºï¼š

- ğŸ§  Langchainï¼šé€šè¿‡å¯ç»„åˆæ€§ä½¿ç”¨LLMæ„å»ºåº”ç”¨ç¨‹åº
- ğŸ”¥ AutoGenï¼ˆè®¡åˆ’ä¸­ï¼‰: ä½¿ç”¨å¤šä¸ªä»£ç†å¼€å‘LLMåº”ç”¨ç¨‹åº
- âš¡ï¸ FastAPIï¼šç”¨äºæ„å»ºé«˜æ€§èƒ½ API çš„ç°ä»£ã€å¿«é€Ÿçš„ Web æ¡†æ¶ã€‚
- ğŸ—„ SQLAlchemyï¼šç”¨äº Python çš„å¼ºå¤§ SQL å·¥å…·é›†å’Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORMï¼‰åº“ã€‚
- ğŸ Python 3.11ï¼šç”¨äºåç«¯å¼€å‘çš„ç¼–ç¨‹è¯­è¨€ã€‚

## ä¸»è¦åŠŸèƒ½

1. ğŸ¤ å¤šç”¨æˆ·æ”¯æŒï¼šæ”¯æŒå¤šä¸ªç”¨æˆ·ï¼Œå…è®¸ä»–ä»¬ä¸ä»£ç†åˆ›å»ºä¼šè¯ã€‚
2. ğŸ“‡ ä¼šè¯åˆ›å»ºï¼šç”¨æˆ·å¯ä»¥ä¸ç‰¹å®šä»£ç†åˆ›å»ºä¼šè¯ï¼Œè¿›è¡Œä¸ªæ€§åŒ–å¯¹è¯ï¼ˆé€šè¿‡è°ƒæ•´å½“å‰ä¼šè¯çš„å‚æ•°æˆ–å½“å‰ä¼šè¯çš„ä»£ç†æˆ–ä»£ç†çš„å‚æ•°ï¼‰ã€‚
3. ğŸ’¬ èŠå¤©è®°å½•ï¼šç”¨æˆ·å¯ä»¥åœ¨ä¼šè¯ä¸­ä¸ä»£ç†è¿›è¡ŒèŠå¤©ï¼Œå¹¶ä¸”ç”±æ¡†æ¶æ”¯æŒå­˜å‚¨å’Œè¯»å–å†å²èŠå¤©è®°å½•ã€‚
4. ğŸ¤–[Chattable ä»£ç†](#chattable) è´¡çŒ®ï¼šå¼€å‘è€…å¯ä»¥å‘ä»“åº“è´¡çŒ® [Chattable ä»£ç†](#chattable)ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¤šé€‰æ‹©ã€‚
5. ğŸ”’ å¤§æ¨¡å‹è°ƒç”¨ç¼“å­˜ï¼šå¯¹å¤§æ¨¡å‹çš„è°ƒç”¨ä½¿ç”¨ç¼“å­˜ï¼Œä»¥æé«˜æ€§èƒ½å’Œæ•ˆç‡ã€‚
6. ğŸ“Š åŸºäºä¼šè¯çš„ token è®¡é‡ï¼ˆè®¡åˆ’ä¸­ï¼‰ï¼šå°†è·Ÿè¸ªæ¯ä¸ªä¼šè¯ä¸­çš„ token ä½¿ç”¨é‡ï¼Œä¸ºèµ„æºç®¡ç†å’Œè®¡è´¹æä¾›æ›´ç²¾ç¡®çš„è®¡é‡ã€‚
7. ğŸ“‚ Chattable åºåˆ—åŒ–ï¼ˆè®¡åˆ’ä¸­ï¼‰ï¼šè®¡åˆ’ä¸­çš„åŠŸèƒ½ï¼Œå°†å®ç° Chattable å¯¹è±¡çš„åºåˆ—åŒ–ï¼Œä»¥ä¾¿æ›´å¥½åœ°å­˜å‚¨å’Œç®¡ç†ã€‚
8. ğŸ”¥ å¤š Agent ä¼šè¯ï¼ˆè®¡åˆ’ä¸­ï¼‰ï¼šæ¡†æ¶æ”¯æŒçš„å¤š agent ä¼šè¯ï¼Œå°†å¤šä¸ª agent å¼•å…¥ä¸€ä¸ªä¼šè¯ï¼Œè¿™äº› agent å¯ä»¥ç›¸äº’äº¤è°ˆä»¥è§£å†³ä»»åŠ¡ã€‚

## ä¼˜ç‚¹

- ğŸš€ ç®€åŒ–å¼€å‘ï¼šå¼€å‘è€…å¯ä»¥ä¸“æ³¨äºæ„å»º [Chattable ä»£ç†](#chattable) åŠå…¶åŠŸèƒ½ï¼Œæ— éœ€æ‹…å¿ƒç”¨æˆ·ç®¡ç†ã€ä¼šè¯ç®¡ç†å’ŒèŠå¤©è®°å½•å­˜å‚¨çš„å¤æ‚æ€§ã€‚
- âš™ï¸ å¿«é€Ÿå‘å¸ƒï¼šäº§å“æ„æƒ³å¯ä»¥å¿«é€Ÿä¸Šçº¿
- ğŸŒŸ ç”¨æˆ·ä½“éªŒï¼šä¼šè¯ç®¡ç†ã€å®¡è®¡ã€ç¼“å­˜ç­‰èƒ½åŠ›æ”¯æ’‘äº†åŸºæœ¬çš„ç”¨æˆ·ä½¿ç”¨ä½“éªŒã€‚

## å¿«é€Ÿå…¥é—¨

è¦å¼€å§‹ä½¿ç”¨ LLM èŠå¤©åº”ç”¨åç«¯ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. ğŸ“¥ ä» [GitHub](https://github.com/ClayCheung/llm-chat-playground) å…‹éš†ä»“åº“ã€‚
2. âš™ï¸ ä½¿ç”¨ `pip install -r requirements.txt` å®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚
3. ğŸ›  é…ç½®å¿…è¦çš„è®¾ç½®ï¼Œå¦‚æ•°æ®åº“è¿æ¥å’Œ API å¯†é’¥ã€‚
4. â–¶ï¸ ä½¿ç”¨ `python main.py` è¿è¡Œåº”ç”¨ç¨‹åºã€‚
5. ğŸŒ è®¿é—®åç«¯ API ç«¯ç‚¹ä¸åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ã€‚
    ```shell
    curl --location '127.0.0.1:8080/CreateSession' \
    --header 'Content-Type: application/json' \
    --data '{
        "user_id": 1,
        "agent": {
            "id": "simple_openai_agent"
        }
    }'
    ```

    ```shell
    curl --location '127.0.0.1:8080/ListSessions' \
    --header 'Content-Type: application/json' \
    --data '{
      "user_id": 1
    }'
    ```

    ```shell
    curl --location '127.0.0.1:8080/SendMessage' \
    --header 'Content-Type: application/json' \
    --data '{
      "session_id": "b36a53ea-b37d-4ea4-9c56-47a4195eb88f",
      "content": "What was the first thing I said?"
    }'
    ```

## æ¦‚å¿µ

### Chattable

- æ¾æ•£çš„æ¥å£æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨å„ç§æ–¹å¼æ¥å®ç° chattable agent, è¯¸å¦‚ langchain, autogen, xagent, agents æˆ–è€…è‡ªå®šä¹‰å®ç°ç­‰ç­‰

```python
class Chattable(ABC):
    session: Optional[Session]

    def __init__(self, session: Session):
        self.session = session

    @abstractmethod
    def chat(self, message: BaseMessage) -> BaseMessage:
        pass

    @classmethod
    def agent(cls) -> str:
        return cls.session.agent.id
```

ç›®å‰å·²æœ‰çš„ Chattable ä»£ç†

| agent id            | ä»‹ç»                  | ä»“åº“è¿æ¥                                                                                   |
|---------------------|---------------------|----------------------------------------------------------------------------------------|
| fake_echo_agent     | ä¸€ä¸ªç”¨äºæµ‹è¯•çš„å‡çš„ echo ä»£ç†   | https://github.com/ClayCheung/llm-chat-playground/blob/main/chains/fake_echo_agent     |
| simple_openai_agent | ä¸€ä¸ªæœ€ç®€æ˜“çš„ openai agent | https://github.com/ClayCheung/llm-chat-playground/blob/main/chains/simple_openai_agent |

## Roadmap

- [ ] å¢åŠ  Chattable ä»£ç†çš„å®ç°
- [ ] ä½¿ç”¨ redis llm è°ƒç”¨ç¼“å­˜ï¼Œç›®å‰æ˜¯ in memory cache
- [ ] æ”¯æŒä¼šè¯çš„ token è®¡é‡
- [ ] æ”¯æŒå¤š agents çš„ä¼šè¯
- [ ] èŠå¤©è®°å½•çš„è‡ªåŠ¨æ±‡æ€»
- [ ] Chattable or Session åºåˆ—åŒ–

## è®¸å¯è¯

LLM èŠå¤©åº”ç”¨åç«¯åŸºäº [MIT è®¸å¯è¯](https://opensource.org/licenses/MIT)
ã€‚è¯·å‚é˜… [LICENSE](https://github.com/ClayCheung/llm-chat-playground/blob/main/LICENSE) æ–‡ä»¶ä»¥è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚
